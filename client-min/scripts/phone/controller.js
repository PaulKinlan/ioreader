var PhoneController=function(){function f(a,b,c){return Math.min(c,Math.max(b,a))}function d(a){b.touch(null),c.animate({marginLeft:-categoryIndex*$(window).width()},function(){a&&a(),b.touch(e)})}$("article").eq(3).addClass("active");var a=this,b=$(".categories"),c=b.add($("nav ul"));$category=$(".category",b),categoryIndex=$(".categories .category.active").prev().length,pageY=window.pageYOffset;var e={swipeX:function(b){categoryIndex==0&&b.dx>50&&a.refresh(),categoryIndex=b.dx<0?Math.min(categoryIndex+1,$category.length-1):Math.max(categoryIndex-1,0),d(function(){a.activate($category.get(categoryIndex))})},swipeY:function(){},moveX:function(a){c.css("marginLeft",a.dx+parseInt(c.css("marginLeft")))},moveY:function(a){var b=Math.max($("body").height(),$(window).height()),c=$(window).height()-$("body").height();console.log("minMa",c,"bh",$("body").height()),$("body").css("marginTop",f(c,parseInt($("body").css("marginTop"))+a.dy,0))},click:function(b){var c=$(b.target);$header=c.closest("header"),$article=c.closest("article"),$story=c.closest(".story"),console.log("hD",$header,"XARTICLE",$article);$story.length||($article.length&&($article.hasClass("active")&&!c.is(".story")?(console.log("TOGGLE OFF",c),a.activate($category.eq(categoryIndex))):(a.activate($article),console.log("TOGGLE ON",c,$article))),d())},longHold:function(a){d()}};$(function(){console.log("cat",b),c.css({marginLeft:-categoryIndex*$(window).width()}),b.touch(e),window.addEventListener("articlechanged",function(a){}),$("header h1").css("color","purple").css("fontWeight","bold")})};PhoneController.prototype=new BaseController,PhoneController.prototype.constructor=PhoneController,Controller=new PhoneController